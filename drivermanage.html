<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GetInTheCar ‚Äî Driver Management</title>
<link rel="stylesheet" href="style.css">
<style>
/* Driver Management Specific Styles */
.management-header {
  background: rgba(255, 255, 255, 0.03);
  border-bottom: 1px solid rgba(255, 85, 85, 0.1);
  padding: 24px;
  backdrop-filter: blur(10px);
}

.header-title {
  font-size: 28px;
  font-weight: 800;
  background: linear-gradient(90deg, #ff5555, #ffdd00);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.management-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  flex-wrap: wrap;
  gap: 16px;
}

.filter-controls {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.filter-select {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 85, 85, 0.2);
  border-radius: 8px;
  padding: 10px 16px;
  color: var(--text);
  font-size: 14px;
  min-width: 150px;
}

.filter-select:focus {
  outline: none;
  border-color: #ff5555;
  box-shadow: 0 0 0 2px rgba(255, 85, 85, 0.2);
}

.search-input {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 85, 85, 0.2);
  border-radius: 8px;
  padding: 10px 16px;
  color: var(--text);
  font-size: 14px;
  min-width: 250px;
}

.search-input:focus {
  outline: none;
  border-color: #ff5555;
  box-shadow: 0 0 0 2px rgba(255, 85, 85, 0.2);
}

.action-buttons {
  display: flex;
  gap: 12px;
}

/* Driver Cards Grid */
.driver-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 20px;
  margin: 20px;
}

.driver-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 85, 85, 0.1);
  border-radius: 16px;
  padding: 20px;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.driver-card:hover {
  background: rgba(255, 85, 85, 0.05);
  border-color: rgba(255, 85, 85, 0.3);
  transform: translateY(-4px);
  box-shadow: 0 10px 30px rgba(255, 59, 48, 0.15);
}

.driver-card-header {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid rgba(255, 85, 85, 0.1);
}

.driver-avatar {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, #ff5555, #ffdd00);
  color: #0a0a0f;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 24px;
  flex-shrink: 0;
}

.driver-basic-info {
  flex: 1;
}

.driver-name {
  font-weight: 800;
  font-size: 18px;
  margin-bottom: 4px;
}

.driver-rating {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
}

.stars {
  color: #ffdd00;
}

.driver-card-body {
  margin-bottom: 20px;
}

.driver-info-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 12px;
  font-size: 14px;
}

.info-label {
  color: var(--muted);
}

.info-value {
  font-weight: 600;
  text-align: right;
}

.driver-status-badge {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.status-online {
  background: rgba(76, 175, 80, 0.15);
  color: #4CAF50;
  border: 1px solid rgba(76, 175, 80, 0.3);
}

.status-offline {
  background: rgba(255, 107, 107, 0.15);
  color: #ff6b6b;
  border: 1px solid rgba(255, 107, 107, 0.3);
}

.status-available {
  background: rgba(76, 175, 80, 0.15);
  color: #4CAF50;
  border: 1px solid rgba(76, 175, 80, 0.3);
}

.status-busy {
  background: rgba(255, 221, 0, 0.15);
  color: #ffdd00;
  border: 1px solid rgba(255, 221, 0, 0.3);
}

.status-suspended {
  background: rgba(159, 168, 218, 0.15);
  color: #9fa8da;
  border: 1px solid rgba(159, 168, 218, 0.3);
}

.driver-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 16px;
  border-top: 1px solid rgba(255, 85, 85, 0.1);
}

.driver-earnings {
  font-weight: 800;
  font-size: 20px;
  background: linear-gradient(90deg, #ff5555, #ffdd00);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.driver-actions {
  display: flex;
  gap: 8px;
}

.action-btn {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 85, 85, 0.1);
  color: var(--text);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
}

.action-btn:hover {
  background: rgba(255, 85, 85, 0.1);
  border-color: rgba(255, 85, 85, 0.3);
  color: #ff5555;
}

.action-btn.edit:hover {
  color: #ffdd00;
}

.action-btn.delete:hover {
  color: #ff6b6b;
}

.action-btn.view:hover {
  color: #4CAF50;
}

/* Stats Cards */
.driver-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin: 20px;
}

.stat-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 85, 85, 0.1);
  border-radius: 12px;
  padding: 24px;
  text-align: center;
  transition: all 0.2s;
}

.stat-card:hover {
  background: rgba(255, 85, 85, 0.05);
  border-color: rgba(255, 85, 85, 0.2);
  transform: translateY(-2px);
}

.stat-value {
  font-size: 36px;
  font-weight: 800;
  margin-bottom: 8px;
  background: linear-gradient(90deg, #ff5555, #ffdd00);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.stat-label {
  font-size: 14px;
  color: var(--muted);
  margin-bottom: 4px;
}

.stat-change {
  font-size: 12px;
  color: var(--muted);
}

.stat-change.positive {
  color: #4CAF50;
}

.stat-change.negative {
  color: #ff6b6b;
}

/* View Toggle */
.view-toggle {
  display: flex;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 85, 85, 0.1);
  border-radius: 8px;
  padding: 4px;
  margin: 0 20px 20px;
}

.view-toggle-btn {
  flex: 1;
  padding: 10px 16px;
  border: none;
  background: none;
  color: var(--muted);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.view-toggle-btn:hover {
  background: rgba(255, 85, 85, 0.05);
  color: var(--text);
}

.view-toggle-btn.active {
  background: linear-gradient(135deg, rgba(255, 85, 85, 0.2), rgba(255, 221, 0, 0.1));
  color: #ff5555;
  border: 1px solid rgba(255, 85, 85, 0.2);
}

/* Table View */
.driver-table-container {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 85, 85, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin: 20px;
  backdrop-filter: blur(10px);
  display: none;
}

.driver-table {
  width: 100%;
  border-collapse: collapse;
}

.driver-table th {
  text-align: left;
  padding: 16px;
  font-size: 12px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-bottom: 1px solid rgba(255, 85, 85, 0.1);
  background: rgba(255, 255, 255, 0.02);
}

.driver-table td {
  padding: 16px;
  border-bottom: 1px solid rgba(255, 85, 85, 0.05);
  font-size: 14px;
  vertical-align: middle;
}

.driver-table tr {
  transition: all 0.2s;
}

.driver-table tr:hover {
  background: rgba(255, 85, 85, 0.05);
}

.driver-avatar-cell {
  display: flex;
  align-items: center;
  gap: 12px;
}

.driver-avatar-small {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, #ff5555, #ffdd00);
  color: #0a0a0f;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 16px;
}

/* Verification Badge */
.verification-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

.verified {
  background: rgba(76, 175, 80, 0.15);
  color: #4CAF50;
  border: 1px solid rgba(76, 175, 80, 0.3);
}

.pending {
  background: rgba(255, 221, 0, 0.15);
  color: #ffdd00;
  border: 1px solid rgba(255, 221, 0, 0.3);
}

.unverified {
  background: rgba(255, 107, 107, 0.15);
  color: #ff6b6b;
  border: 1px solid rgba(255, 107, 107, 0.3);
}

/* Pagination */
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 85, 85, 0.1);
}

.page-btn {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 85, 85, 0.1);
  color: var(--text);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
}

.page-btn:hover {
  background: rgba(255, 85, 85, 0.1);
  border-color: rgba(255, 85, 85, 0.3);
}

.page-btn.active {
  background: linear-gradient(135deg, #ff5555, #ffdd00);
  color: #0a0a0f;
  border-color: transparent;
}

.page-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Modal Styles */
.modal-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
}

.driver-modal {
  background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
  border: 1px solid rgba(255, 85, 85, 0.15);
  border-radius: 16px;
  width: 90%;
  max-width: 700px;
  max-height: 90vh;
  overflow-y: auto;
  padding: 32px;
  color: var(--text);
  box-shadow: 0 20px 60px rgba(255, 59, 48, 0.15), 
              0 0 0 1px rgba(255, 221, 0, 0.1);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid rgba(255, 85, 85, 0.1);
}

.modal-title {
  font-size: 24px;
  font-weight: 700;
  background: linear-gradient(90deg, #ff5555, #ffdd00);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.close-btn {
  background: none;
  border: none;
  color: var(--muted);
  font-size: 28px;
  cursor: pointer;
  padding: 0;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: all 0.2s;
}

.close-btn:hover {
  background: rgba(255, 85, 85, 0.1);
  color: #ff5555;
}

/* Modal Tabs */
.modal-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 24px;
  border-bottom: 1px solid rgba(255, 85, 85, 0.1);
}

.modal-tab {
  padding: 12px 24px;
  background: none;
  border: none;
  color: var(--muted);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
}

.modal-tab:hover {
  color: var(--text);
}

.modal-tab.active {
  color: #ff5555;
  border-bottom-color: #ff5555;
}

/* Form Styles */
.form-group {
  margin-bottom: 20px;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 16px;
}

.form-label {
  display: block;
  margin-bottom: 8px;
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}

.form-input {
  width: 100%;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 85, 85, 0.2);
  border-radius: 8px;
  padding: 12px 16px;
  color: var(--text);
  font-size: 14px;
  transition: all 0.2s;
}

.form-input:focus {
  outline: none;
  border-color: #ff5555;
  box-shadow: 0 0 0 2px rgba(255, 85, 85, 0.2);
}

.form-select {
  width: 100%;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 85, 85, 0.2);
  border-radius: 8px;
  padding: 12px 16px;
  color: var(--text);
  font-size: 14px;
  transition: all 0.2s;
}

.form-select:focus {
  outline: none;
  border-color: #ff5555;
  box-shadow: 0 0 0 2px rgba(255, 85, 85, 0.2);
}

.form-textarea {
  width: 100%;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 85, 85, 0.2);
  border-radius: 8px;
  padding: 12px 16px;
  color: var(--text);
  font-size: 14px;
  min-height: 100px;
  resize: vertical;
  transition: all 0.2s;
}

.form-textarea:focus {
  outline: none;
  border-color: #ff5555;
  box-shadow: 0 0 0 2px rgba(255, 85, 85, 0.2);
}

/* Document Upload */
.document-upload {
  border: 2px dashed rgba(255, 85, 85, 0.2);
  border-radius: 12px;
  padding: 32px;
  text-align: center;
  margin-bottom: 20px;
  transition: all 0.2s;
}

.document-upload:hover {
  border-color: rgba(255, 85, 85, 0.4);
  background: rgba(255, 85, 85, 0.05);
}

.upload-icon {
  font-size: 48px;
  color: rgba(255, 85, 85, 0.5);
  margin-bottom: 16px;
}

.upload-text {
  font-size: 14px;
  color: var(--muted);
  margin-bottom: 8px;
}

.upload-subtext {
  font-size: 12px;
  color: var(--muted);
}

/* Document List */
.document-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.document-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 85, 85, 0.1);
  border-radius: 8px;
}

.document-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.document-icon {
  font-size: 20px;
  color: #ff5555;
}

.document-name {
  font-weight: 600;
  font-size: 14px;
}

.document-status {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 6px;
}

.status-approved {
  background: rgba(76, 175, 80, 0.15);
  color: #4CAF50;
}

.status-pending {
  background: rgba(255, 221, 0, 0.15);
  color: #ffdd00;
}

.status-rejected {
  background: rgba(255, 107, 107, 0.15);
  color: #ff6b6b;
}

/* Performance Metrics */
.metrics-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  margin-bottom: 24px;
}

.metric-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 85, 85, 0.1);
  border-radius: 12px;
  padding: 16px;
  text-align: center;
}

.metric-value {
  font-size: 24px;
  font-weight: 800;
  margin-bottom: 4px;
  color: #ffdd00;
}

.metric-label {
  font-size: 12px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Modal Actions */
.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  margin-top: 32px;
  padding-top: 24px;
  border-top: 1px solid rgba(255, 85, 85, 0.1);
}

/* Toggle Switch */
.toggle-switch {
  position: relative;
  width: 50px;
  height: 26px;
}

.toggle-input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 85, 85, 0.2);
  transition: .4s;
  border-radius: 34px;
}

.toggle-slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 4px;
  bottom: 4px;
  background-color: #0a0a0f;
  transition: .4s;
  border-radius: 50%;
}

.toggle-input:checked + .toggle-slider {
  background: linear-gradient(90deg, #ff5555, #ffdd00);
}

.toggle-input:checked + .toggle-slider:before {
  transform: translateX(24px);
}

/* Responsive Design */
@media (max-width: 768px) {
  .driver-grid {
    grid-template-columns: 1fr;
    margin: 10px;
  }
  
  .driver-table-container {
    margin: 10px;
    padding: 10px;
    overflow-x: auto;
  }
  
  .driver-table {
    min-width: 800px;
  }
  
  .form-row {
    grid-template-columns: 1fr;
  }
  
  .management-actions {
    flex-direction: column;
    align-items: stretch;
  }
  
  .search-input {
    min-width: auto;
  }
  
  .driver-stats {
    grid-template-columns: repeat(2, 1fr);
    margin: 10px;
  }
  
  .stat-value {
    font-size: 28px;
  }
  
  .metrics-grid {
    grid-template-columns: 1fr;
  }
}
</style>
</head>
<body class="dark">

<!-- SIDEBAR -->
<aside class="sidebar card fade-in">
  <div class="brand">
    <div class="logo">GET</div>
    <div>
      <h2>GetInTheCar</h2>
      <div class="small muted">Admin Dashboard</div>
    </div>
  </div>

  <nav>
    <a href="admin.html">üìä Dashboard</a>
    <a href="usermanage.html">üë• User Management</a>
    <a href="drivermanage.html" class="active">üöó Driver Management</a>
    <a href="index.html">üîê Log Out</a>
  </nav>

  <div class="toggle-row">
    <div class="small muted">Dark Mode</div>
    <div id="darkSwitch" class="switch dark-toggle-on" title="Toggle dark mode">
      <div class="knob"></div>
    </div>
  </div>
</aside>

<!-- MAIN -->
<main class="main">
  <!-- Driver Management Header -->
  <div class="management-header">
    <div class="header-title">Driver Management</div>
    <div class="small muted">Manage driver accounts, vehicles, and performance</div>
    
    <div class="driver-stats">
      <div class="stat-card">
        <div class="stat-value" id="totalDrivers">48</div>
        <div class="stat-label">Total Drivers</div>
        <div class="stat-change positive">+4 this month</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="onlineDrivers">32</div>
        <div class="stat-label">Online Now</div>
        <div class="stat-change positive">67% active</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="availableDrivers">24</div>
        <div class="stat-label">Available</div>
        <div class="stat-change positive">50% capacity</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalEarnings">45,280.50</div>
        <div class="stat-label">Total Earnings (RM)</div>
        <div class="stat-change positive">+12% growth</div>
      </div>
    </div>
  </div>

  <!-- Driver Management Actions -->
  <div class="management-actions">
    <div class="filter-controls">
      <select class="filter-select" id="statusFilter" onchange="filterDrivers()">
        <option value="all">All Status</option>
        <option value="available">Available</option>
        <option value="busy">On Trip</option>
        <option value="offline">Offline</option>
        <option value="suspended">Suspended</option>
      </select>
      
      <select class="filter-select" id="verificationFilter" onchange="filterDrivers()">
        <option value="all">All Verification</option>
        <option value="verified">Verified</option>
        <option value="pending">Pending</option>
        <option value="unverified">Unverified</option>
      </select>
      
      <select class="filter-select" id="vehicleFilter" onchange="filterDrivers()">
        <option value="all">All Vehicles</option>
        <option value="car">Car</option>
        <option value="motor">Motorcycle</option>
        <option value="van">Van</option>
        <option value="premium">Premium</option>
      </select>
      
      <input type="text" class="search-input" id="driverSearch" placeholder="Search drivers by name, license, or vehicle..." oninput="filterDrivers()">
    </div>
    
    <div class="action-buttons">
      <button class="small-btn" onclick="exportDrivers()" title="Export to CSV">
        üì• Export
      </button>
      <button class="btn" onclick="addNewDriver()" title="Add New Driver">
        + Add Driver
      </button>
    </div>
  </div>

  <!-- View Toggle -->
  <div class="view-toggle">
    <button class="view-toggle-btn active" onclick="switchView('grid')">
      <span>üü¶</span> Grid View
    </button>
    <button class="view-toggle-btn" onclick="switchView('table')">
      <span>üìã</span> Table View
    </button>
  </div>

  <!-- Grid View -->
  <div id="gridView" class="driver-grid">
    <!-- Driver cards will be dynamically inserted here -->
  </div>

  <!-- Table View -->
  <div id="tableView" class="driver-table-container">
    <table class="driver-table">
      <thead>
        <tr>
          <th>Driver</th>
          <th>Contact</th>
          <th>Status</th>
          <th>Vehicle</th>
          <th>Rating</th>
          <th>Trips</th>
          <th>Earnings</th>
          <th>Verification</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="driverTableBody">
        <!-- Driver rows will be dynamically inserted here -->
      </tbody>
    </table>
    
    <!-- Pagination -->
    <div class="pagination">
      <button class="page-btn" onclick="changePage(-1)" id="prevPage" disabled>‚Üê</button>
      <button class="page-btn active" onclick="changePage(1)">1</button>
      <button class="page-btn" onclick="changePage(2)">2</button>
      <button class="page-btn" onclick="changePage(3)">3</button>
      <button class="page-btn" onclick="changePage(4)">4</button>
      <button class="page-btn" onclick="changePage(5)">5</button>
      <span class="small muted" style="margin: 0 12px;">...</span>
      <button class="page-btn" onclick="changePage(10)">10</button>
      <button class="page-btn" onclick="changePage(1)" id="nextPage">‚Üí</button>
    </div>
  </div>
</main>

<!-- Driver Details Modal -->
<div id="driverModal" class="modal-overlay" style="display:none;">
  <div class="driver-modal">
    <div class="modal-header">
      <div class="modal-title" id="driverModalTitle">Driver Details</div>
      <button class="close-btn" onclick="closeDriverModal()">√ó</button>
    </div>
    
    <div class="modal-tabs">
      <button class="modal-tab active" onclick="switchTab('profile')">Profile</button>
      <button class="modal-tab" onclick="switchTab('documents')">Documents</button>
      <button class="modal-tab" onclick="switchTab('performance')">Performance</button>
      <button class="modal-tab" onclick="switchTab('settings')">Settings</button>
    </div>
    
    <div id="driverModalContent">
      <!-- Content will be dynamically inserted -->
    </div>
  </div>
</div>

<!-- Bulk Actions Modal -->
<div id="bulkModal" class="modal-overlay" style="display:none;">
  <div class="driver-modal" style="max-width: 400px;">
    <div class="modal-header">
      <div class="modal-title">Bulk Actions</div>
      <button class="close-btn" onclick="closeBulkModal()">√ó</button>
    </div>
    
    <div id="bulkModalContent">
      <div class="form-group">
        <label class="form-label">Selected Drivers: <span id="selectedCount">0</span></label>
      </div>
      
      <div class="form-group">
        <label class="form-label">Action</label>
        <select class="form-select" id="bulkAction">
          <option value="">Select action...</option>
          <option value="approve">Approve Drivers</option>
          <option value="suspend">Suspend Drivers</option>
          <option value="activate">Activate Drivers</option>
          <option value="send_notification">Send Notification</option>
          <option value="export">Export Selected</option>
        </select>
      </div>
      
      <div id="bulkActionContent" style="display:none;">
        <!-- Dynamic content based on action -->
      </div>
      
      <div class="modal-actions">
        <button class="small-btn" onclick="closeBulkModal()">Cancel</button>
        <button class="btn" onclick="executeBulkAction()" id="executeBulkBtn" disabled>Execute</button>
      </div>
    </div>
  </div>
</div>

<script>
// Theme toggle logic
const body = document.body;
const darkSwitch = document.getElementById('darkSwitch');
darkSwitch.addEventListener('click', () => {
  const knob = darkSwitch.querySelector('.knob');
  darkSwitch.classList.toggle('dark-toggle-on');
  body.classList.toggle('dark');
  if (body.classList.contains('dark')) {
    knob.style.left = '25px';
    knob.style.boxShadow = '0 10px 30px rgba(255, 221, 0, 0.12)';
  } else {
    knob.style.left = '3px';
    knob.style.boxShadow = '0 6px 18px rgba(255, 59, 48, 0.12)';
  }
});

// Sample Driver Data
const driversData = [
  {
    id: 1,
    name: 'Yaseer Yahaya',
    email: 'yaseer@driver.com',
    phone: '+6017-890-1234',
    status: 'available',
    online: true,
    rating: 4.8,
    trips: 1247,
    vehicle: 'Myvi',
    vehiclePlate: 'AKM 7110',
    vehicleType: 'car',
    earnings: 12450.50,
    joined: '2023-03-15',
    lastActive: 'Just now',
    address: 'Taman Sri Arau, 02600 Arau, Perlis',
    licenseNumber: 'DL1234567',
    licenseExpiry: '2025-12-31',
    documents: [
      { name: 'Driver License', status: 'approved', expiry: '2025-12-31' },
      { name: 'Vehicle Insurance', status: 'approved', expiry: '2024-12-31' },
      { name: 'Road Tax', status: 'pending', expiry: '2024-06-30' }
    ],
    verification: 'verified',
    performance: {
      acceptanceRate: 94,
      completionRate: 98,
      avgRating: 4.8,
      responseTime: '2.5 min'
    }
  },
  {
    id: 2,
    name: 'Masturina Balqis',
    email: 'masturina@driver.com',
    phone: '+6018-901-2345',
    status: 'busy',
    online: true,
    rating: 4.9,
    trips: 892,
    vehicle: 'Proton Persona',
    vehiclePlate: 'CCU 2781',
    vehicleType: 'car',
    earnings: 8920.75,
    joined: '2023-05-20',
    lastActive: '5 min ago',
    address: 'Kampung Arau, 02600 Arau, Perlis',
    licenseNumber: 'DL2345678',
    licenseExpiry: '2026-03-31',
    documents: [
      { name: 'Driver License', status: 'approved', expiry: '2026-03-31' },
      { name: 'Vehicle Insurance', status: 'approved', expiry: '2024-09-30' },
      { name: 'Road Tax', status: 'approved', expiry: '2024-09-30' }
    ],
    verification: 'verified',
    performance: {
      acceptanceRate: 96,
      completionRate: 99,
      avgRating: 4.9,
      responseTime: '1.8 min'
    }
  },
  {
    id: 3,
    name: 'Aiman Iskandar',
    email: 'aiman@driver.com',
    phone: '+6019-012-3456',
    status: 'available',
    online: true,
    rating: 4.7,
    trips: 1563,
    vehicle: 'Perodua Axia',
    vehiclePlate: 'ALD 8794',
    vehicleType: 'car',
    earnings: 15630.20,
    joined: '2023-01-10',
    lastActive: 'Just now',
    address: 'Taman Muhibbah, 02600 Arau, Perlis',
    licenseNumber: 'DL3456789',
    licenseExpiry: '2025-08-15',
    documents: [
      { name: 'Driver License', status: 'approved', expiry: '2025-08-15' },
      { name: 'Vehicle Insurance', status: 'pending', expiry: '2024-04-30' },
      { name: 'Road Tax', status: 'rejected', expiry: '2024-04-30' }
    ],
    verification: 'pending',
    performance: {
      acceptanceRate: 89,
      completionRate: 95,
      avgRating: 4.7,
      responseTime: '3.2 min'
    }
  },
  {
    id: 4,
    name: 'Nurul Izzati',
    email: 'izzati@driver.com',
    phone: '+6011-123-4567',
    status: 'offline',
    online: false,
    rating: 4.6,
    trips: 734,
    vehicle: 'Honda City',
    vehiclePlate: 'PPD 1234',
    vehicleType: 'car',
    earnings: 7340.90,
    joined: '2023-07-05',
    lastActive: '2 hours ago',
    address: 'Taman Desa Arau, 02600 Arau, Perlis',
    licenseNumber: 'DL4567890',
    licenseExpiry: '2025-11-30',
    documents: [
      { name: 'Driver License', status: 'approved', expiry: '2025-11-30' },
      { name: 'Vehicle Insurance', status: 'approved', expiry: '2024-10-31' },
      { name: 'Road Tax', status: 'approved', expiry: '2024-10-31' }
    ],
    verification: 'verified',
    performance: {
      acceptanceRate: 91,
      completionRate: 97,
      avgRating: 4.6,
      responseTime: '2.8 min'
    }
  },
  {
    id: 5,
    name: 'Haziq Aiman',
    email: 'haziq@driver.com',
    phone: '+6012-234-5678',
    status: 'available',
    online: true,
    rating: 4.5,
    trips: 521,
    vehicle: 'Yamaha Y15',
    vehiclePlate: 'VJD 5734',
    vehicleType: 'motor',
    earnings: 5210.30,
    joined: '2023-09-12',
    lastActive: '10 min ago',
    address: 'Kampung Jelutong, 02600 Arau, Perlis',
    licenseNumber: 'DL5678901',
    licenseExpiry: '2026-02-28',
    documents: [
      { name: 'Driver License', status: 'approved', expiry: '2026-02-28' },
      { name: 'Motor Insurance', status: 'approved', expiry: '2024-08-31' },
      { name: 'Road Tax', status: 'approved', expiry: '2024-08-31' }
    ],
    verification: 'verified',
    performance: {
      acceptanceRate: 87,
      completionRate: 93,
      avgRating: 4.5,
      responseTime: '3.5 min'
    }
  },
  {
    id: 6,
    name: 'Syed Amir',
    email: 'syed@driver.com',
    phone: '+6013-345-6789',
    status: 'suspended',
    online: false,
    rating: 3.8,
    trips: 215,
    vehicle: 'Proton Saga',
    vehiclePlate: 'BKM 4567',
    vehicleType: 'car',
    earnings: 2150.80,
    joined: '2023-11-25',
    lastActive: '3 days ago',
    address: 'Taman Arau Indah, 02600 Arau, Perlis',
    licenseNumber: 'DL6789012',
    licenseExpiry: '2025-05-15',
    documents: [
      { name: 'Driver License', status: 'approved', expiry: '2025-05-15' },
      { name: 'Vehicle Insurance', status: 'rejected', expiry: '2024-01-31' },
      { name: 'Road Tax', status: 'pending', expiry: '2024-01-31' }
    ],
    verification: 'unverified',
    suspensionReason: 'Multiple customer complaints',
    performance: {
      acceptanceRate: 72,
      completionRate: 85,
      avgRating: 3.8,
      responseTime: '5.1 min'
    }
  },
  {
    id: 7,
    name: 'Zarina Abdullah',
    email: 'zarina@driver.com',
    phone: '+6014-456-7890',
    status: 'busy',
    online: true,
    rating: 4.9,
    trips: 987,
    vehicle: 'Toyota Vios',
    vehiclePlate: 'JDN 3345',
    vehicleType: 'car',
    earnings: 9875.60,
    joined: '2023-04-18',
    lastActive: '15 min ago',
    address: 'Taman Seri Indah, 02600 Arau, Perlis',
    licenseNumber: 'DL7890123',
    licenseExpiry: '2026-07-31',
    documents: [
      { name: 'Driver License', status: 'approved', expiry: '2026-07-31' },
      { name: 'Vehicle Insurance', status: 'approved', expiry: '2024-11-30' },
      { name: 'Road Tax', status: 'approved', expiry: '2024-11-30' }
    ],
    verification: 'verified',
    performance: {
      acceptanceRate: 97,
      completionRate: 99,
      avgRating: 4.9,
      responseTime: '1.5 min'
    }
  },
  {
    id: 8,
    name: 'Rahmat Ali',
    email: 'rahmat@driver.com',
    phone: '+6015-567-8901',
    status: 'available',
    online: true,
    rating: 4.3,
    trips: 412,
    vehicle: 'Honda Wave',
    vehiclePlate: 'PMK 7890',
    vehicleType: 'motor',
    earnings: 4120.40,
    joined: '2023-12-01',
    lastActive: 'Just now',
    address: 'Kampung Sungai Baru, 02600 Arau, Perlis',
    licenseNumber: 'DL8901234',
    licenseExpiry: '2025-09-30',
    documents: [
      { name: 'Driver License', status: 'approved', expiry: '2025-09-30' },
      { name: 'Motor Insurance', status: 'pending', expiry: '2024-03-31' },
      { name: 'Road Tax', status: 'pending', expiry: '2024-03-31' }
    ],
    verification: 'pending',
    performance: {
      acceptanceRate: 84,
      completionRate: 91,
      avgRating: 4.3,
      responseTime: '4.2 min'
    }
  }
];

// State Management
let currentPage = 1;
const itemsPerPage = 8;
let selectedDrivers = new Set();
let currentTab = 'profile';
let editingDriverId = null;
let currentView = 'grid';

// Initialize Driver Management
function initializeDriverManagement() {
  renderDriverGrid();
  renderDriverTable();
  updateStats();
  setupEventListeners();
}

// Render Driver Grid
function renderDriverGrid(filteredDrivers = null) {
  const gridView = document.getElementById('gridView');
  const drivers = filteredDrivers || driversData;
  
  // Calculate pagination for grid view
  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const pageDrivers = drivers.slice(startIndex, endIndex);
  
  gridView.innerHTML = '';
  
  pageDrivers.forEach(driver => {
    const card = document.createElement('div');
    card.className = 'driver-card fade-in';
    
    // Get status badge class
    const statusClass = `status-${driver.status}`;
    const statusText = driver.status.charAt(0).toUpperCase() + driver.status.slice(1);
    
    // Get verification badge
    let verificationBadge;
    switch(driver.verification) {
      case 'verified':
        verificationBadge = `<span class="verification-badge verified">‚úì Verified</span>`;
        break;
      case 'pending':
        verificationBadge = `<span class="verification-badge pending">‚è≥ Pending</span>`;
        break;
      case 'unverified':
        verificationBadge = `<span class="verification-badge unverified">‚úó Unverified</span>`;
        break;
    }
    
    card.innerHTML = `
      <div class="driver-card-header">
        <div class="driver-avatar">${driver.name.charAt(0)}</div>
        <div class="driver-basic-info">
          <div class="driver-name">${driver.name}</div>
          <div class="driver-rating">
            <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
            <span>${driver.rating} (${driver.trips} trips)</span>
          </div>
          ${verificationBadge}
        </div>
      </div>
      
      <div class="driver-card-body">
        <div class="driver-info-row">
          <span class="info-label">Status</span>
          <span class="driver-status-badge ${statusClass}">${statusText}</span>
        </div>
        
        <div class="driver-info-row">
          <span class="info-label">Vehicle</span>
          <span class="info-value">${driver.vehicle} (${driver.vehiclePlate})</span>
        </div>
        
        <div class="driver-info-row">
          <span class="info-label">Contact</span>
          <span class="info-value">${driver.phone}</span>
        </div>
        
        <div class="driver-info-row">
          <span class="info-label">License</span>
          <span class="info-value">${driver.licenseNumber}</span>
        </div>
        
        <div class="driver-info-row">
          <span class="info-label">Joined</span>
          <span class="info-value">${formatDate(driver.joined)}</span>
        </div>
      </div>
      
      <div class="driver-card-footer">
        <div class="driver-earnings">RM ${driver.earnings?.toFixed(2) || '0.00'}</div>
        <div class="driver-actions">
          <button class="action-btn view" onclick="viewDriver(${driver.id})" title="View Details">
            üëÅÔ∏è
          </button>
          <button class="action-btn edit" onclick="editDriver(${driver.id})" title="Edit Driver">
            ‚úèÔ∏è
          </button>
          <button class="action-btn" onclick="toggleDriverStatus(${driver.id})" title="Toggle Online Status">
            ${driver.online ? 'üî¥' : 'üü¢'}
          </button>
        </div>
      </div>
    `;
    
    gridView.appendChild(card);
  });
  
  updatePagination(drivers.length);
}

// Render Driver Table
function renderDriverTable(filteredDrivers = null) {
  const tbody = document.getElementById('driverTableBody');
  const drivers = filteredDrivers || driversData;
  
  // Calculate pagination for table view
  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const pageDrivers = drivers.slice(startIndex, endIndex);
  
  tbody.innerHTML = '';
  
  pageDrivers.forEach(driver => {
    const row = document.createElement('tr');
    
    // Get status badge class
    const statusClass = `status-${driver.status}`;
    const statusText = driver.status.charAt(0).toUpperCase() + driver.status.slice(1);
    
    // Get verification badge
    let verificationClass, verificationText;
    switch(driver.verification) {
      case 'verified':
        verificationClass = 'verified';
        verificationText = 'Verified';
        break;
      case 'pending':
        verificationClass = 'pending';
        verificationText = 'Pending';
        break;
      case 'unverified':
        verificationClass = 'unverified';
        verificationText = 'Unverified';
        break;
    }
    
    row.innerHTML = `
      <td>
        <div class="driver-avatar-cell">
          <div class="driver-avatar-small">${driver.name.charAt(0)}</div>
          <div>
            <div style="font-weight: 700;">${driver.name}</div>
            <div class="small muted">${driver.email}</div>
          </div>
        </div>
      </td>
      <td>
        <div>${driver.phone}</div>
        <div class="small muted">${driver.licenseNumber}</div>
      </td>
      <td>
        <span class="driver-status-badge ${statusClass}">${statusText}</span>
        <div class="small muted" style="margin-top: 4px;">${driver.online ? 'Online' : 'Offline'}</div>
      </td>
      <td>
        <div style="font-weight: 600;">${driver.vehicle}</div>
        <div class="small muted">${driver.vehiclePlate}</div>
      </td>
      <td>
        <div style="display: flex; align-items: center; gap: 8px;">
          <span style="color: #ffdd00;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
          <span>${driver.rating}</span>
        </div>
        <div class="small muted">${driver.trips} trips</div>
      </td>
      <td>
        <div style="font-weight: 700;">${driver.trips}</div>
        <div class="small muted">${driver.performance?.completionRate || 0}% completion</div>
      </td>
      <td>
        <div style="font-weight: 800; color: #ffdd00;">RM ${driver.earnings?.toFixed(2) || '0.00'}</div>
        <div class="small muted">${getDaysAgo(driver.joined)} days active</div>
      </td>
      <td>
        <span class="verification-badge ${verificationClass}">${verificationText}</span>
      </td>
      <td>
        <div class="driver-actions">
          <button class="action-btn view" onclick="viewDriver(${driver.id})" title="View Details">
            üëÅÔ∏è
          </button>
          <button class="action-btn edit" onclick="editDriver(${driver.id})" title="Edit Driver">
            ‚úèÔ∏è
          </button>
          <button class="action-btn" onclick="toggleDriverStatus(${driver.id})" title="Toggle Online Status">
            ${driver.online ? 'üî¥' : 'üü¢'}
          </button>
        </div>
      </td>
    `;
    
    tbody.appendChild(row);
  });
  
  updatePagination(drivers.length);
}

// Switch View
function switchView(viewType) {
  currentView = viewType;
  
  // Update toggle buttons
  document.querySelectorAll('.view-toggle-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelector(`.view-toggle-btn[onclick="switchView('${viewType}')"]`).classList.add('active');
  
  // Show/hide views
  if (viewType === 'grid') {
    document.getElementById('gridView').style.display = 'grid';
    document.getElementById('tableView').style.display = 'none';
  } else {
    document.getElementById('gridView').style.display = 'none';
    document.getElementById('tableView').style.display = 'block';
  }
}

// Filter Drivers
function filterDrivers() {
  const statusFilter = document.getElementById('statusFilter').value;
  const verificationFilter = document.getElementById('verificationFilter').value;
  const vehicleFilter = document.getElementById('vehicleFilter').value;
  const searchTerm = document.getElementById('driverSearch').value.toLowerCase();
  
  let filtered = driversData;
  
  // Apply status filter
  if (statusFilter !== 'all') {
    filtered = filtered.filter(driver => driver.status === statusFilter);
  }
  
  // Apply verification filter
  if (verificationFilter !== 'all') {
    filtered = filtered.filter(driver => driver.verification === verificationFilter);
  }
  
  // Apply vehicle filter
  if (vehicleFilter !== 'all') {
    filtered = filtered.filter(driver => driver.vehicleType === vehicleFilter);
  }
  
  // Apply search filter
  if (searchTerm) {
    filtered = filtered.filter(driver => 
      driver.name.toLowerCase().includes(searchTerm) ||
      driver.email.toLowerCase().includes(searchTerm) ||
      driver.phone.includes(searchTerm) ||
      driver.licenseNumber.toLowerCase().includes(searchTerm) ||
      driver.vehicle.toLowerCase().includes(searchTerm) ||
      driver.vehiclePlate.toLowerCase().includes(searchTerm)
    );
  }
  
  if (currentView === 'grid') {
    renderDriverGrid(filtered);
  } else {
    renderDriverTable(filtered);
  }
}

// Update Statistics
function updateStats() {
  const totalDrivers = driversData.length;
  const onlineDrivers = driversData.filter(d => d.online).length;
  const availableDrivers = driversData.filter(d => d.status === 'available').length;
  const totalEarnings = driversData.reduce((sum, driver) => sum + driver.earnings, 0);
  
  document.getElementById('totalDrivers').textContent = totalDrivers;
  document.getElementById('onlineDrivers').textContent = onlineDrivers;
  document.getElementById('availableDrivers').textContent = availableDrivers;
  document.getElementById('totalEarnings').textContent = totalEarnings.toFixed(2);
}

// View Driver Details
function viewDriver(driverId) {
  const driver = driversData.find(d => d.id === driverId);
  if (!driver) return;
  
  editingDriverId = driverId;
  document.getElementById('driverModalTitle').textContent = 'Driver Details';
  
  // Create modal content
  let content = `
    <div id="profileTab" class="modal-tab-content" style="display: block;">
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Full Name</label>
          <div class="form-input" style="background: rgba(255,255,255,0.02);">${driver.name}</div>
        </div>
        <div class="form-group">
          <label class="form-label">Email</label>
          <div class="form-input" style="background: rgba(255,255,255,0.02);">${driver.email}</div>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Phone Number</label>
          <div class="form-input" style="background: rgba(255,255,255,0.02);">${driver.phone}</div>
        </div>
        <div class="form-group">
          <label class="form-label">License Number</label>
          <div class="form-input" style="background: rgba(255,255,255,0.02);">${driver.licenseNumber}</div>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Vehicle</label>
          <div class="form-input" style="background: rgba(255,255,255,0.02);">${driver.vehicle} (${driver.vehiclePlate})</div>
        </div>
        <div class="form-group">
          <label class="form-label">Vehicle Type</label>
          <div class="form-input" style="background: rgba(255,255,255,0.02);">${driver.vehicleType.charAt(0).toUpperCase() + driver.vehicleType.slice(1)}</div>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Address</label>
        <div class="form-input" style="background: rgba(255,255,255,0.02);">${driver.address}</div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Status</label>
          <div class="driver-status-badge status-${driver.status}" style="display: inline-block;">
            ${driver.status.charAt(0).toUpperCase() + driver.status.slice(1)}
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Online Status</label>
          <div style="display: flex; align-items: center; gap: 8px;">
            <span style="color: ${driver.online ? '#4CAF50' : '#ff6b6b'}; font-size: 20px;">
              ${driver.online ? '‚óè' : '‚óã'}
            </span>
            <span>${driver.online ? 'Online' : 'Offline'}</span>
          </div>
        </div>
      </div>
      
      ${driver.suspensionReason ? `
        <div class="form-group">
          <label class="form-label">Suspension Reason</label>
          <div class="form-input" style="background: rgba(255,107,107,0.1); color: #ff6b6b;">
            ${driver.suspensionReason}
          </div>
        </div>
      ` : ''}
    </div>
    
    <div id="documentsTab" class="modal-tab-content" style="display: none;">
      <div class="document-upload">
        <div class="upload-icon">üìÑ</div>
        <div class="upload-text">Upload Driver Documents</div>
        <div class="upload-subtext">Drag & drop files or click to browse</div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Document Status</label>
        <div class="document-list">
          ${driver.documents.map(doc => `
            <div class="document-item">
              <div class="document-info">
                <div class="document-icon">üìã</div>
                <div>
                  <div class="document-name">${doc.name}</div>
                  <div class="small muted">Expires: ${formatDate(doc.expiry)}</div>
                </div>
              </div>
              <div class="document-status status-${doc.status}">
                ${doc.status.charAt(0).toUpperCase() + doc.status.slice(1)}
              </div>
            </div>
          `).join('')}
        </div>
      </div>
    </div>
    
    <div id="performanceTab" class="modal-tab-content" style="display: none;">
      <div class="metrics-grid">
        <div class="metric-card">
          <div class="metric-value">${driver.performance?.acceptanceRate || 0}%</div>
          <div class="metric-label">Acceptance Rate</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">${driver.performance?.completionRate || 0}%</div>
          <div class="metric-label">Completion Rate</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">${driver.rating}</div>
          <div class="metric-label">Average Rating</div>
        </div>
        <div class="metric-card">
          <div class="metric-value">${driver.performance?.responseTime || 'N/A'}</div>
          <div class="metric-label">Avg Response Time</div>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Total Trips</label>
          <div class="form-input" style="background: rgba(255,255,255,0.02); text-align: center; font-size: 24px; font-weight: 800;">
            ${driver.trips}
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Total Earnings</label>
          <div class="form-input" style="background: rgba(255,255,255,0.02); text-align: center; font-size: 24px; font-weight: 800; color: #ffdd00;">
            RM ${driver.earnings?.toFixed(2) || '0.00'}
          </div>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Driver Since</label>
        <div class="form-input" style="background: rgba(255,255,255,0.02);">
          ${formatDate(driver.joined)} (${getDaysAgo(driver.joined)} days)
        </div>
      </div>
    </div>
    
    <div id="settingsTab" class="modal-tab-content" style="display: none;">
      <div class="form-group">
        <label class="form-label">Account Status</label>
        <select class="form-select" id="driverAccountStatus">
          <option value="active" ${driver.status !== 'suspended' ? 'selected' : ''}>Active</option>
          <option value="suspended" ${driver.status === 'suspended' ? 'selected' : ''}>Suspended</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="form-label">Verification Status</label>
        <select class="form-select" id="driverVerificationStatus">
          <option value="verified" ${driver.verification === 'verified' ? 'selected' : ''}>Verified</option>
          <option value="pending" ${driver.verification === 'pending' ? 'selected' : ''}>Pending</option>
          <option value="unverified" ${driver.verification === 'unverified' ? 'selected' : ''}>Unverified</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="form-label">Online Status</label>
        <label class="toggle-switch">
          <input type="checkbox" id="driverOnlineStatus" ${driver.online ? 'checked' : ''}>
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <div class="form-group">
        <label class="form-label">Driver Notes</label>
        <textarea class="form-textarea" id="driverNotes" placeholder="Add notes about this driver..."></textarea>
      </div>
      
      <div class="modal-actions">
        <button class="small-btn" onclick="closeDriverModal()">Cancel</button>
        <button class="btn" onclick="saveDriverSettings()">Save Changes</button>
      </div>
    </div>
  `;
  
  document.getElementById('driverModalContent').innerHTML = content;
  document.getElementById('driverModal').style.display = 'flex';
  currentTab = 'profile';
  updateModalTabs();
}

// Edit Driver
function editDriver(driverId) {
  const driver = driversData.find(d => d.id === driverId);
  if (!driver) return;
  
  editingDriverId = driverId;
  document.getElementById('driverModalTitle').textContent = 'Edit Driver';
  
  let content = `
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Full Name *</label>
        <input type="text" class="form-input" id="editDriverName" value="${driver.name}" required>
      </div>
      <div class="form-group">
        <label class="form-label">Email *</label>
        <input type="email" class="form-input" id="editDriverEmail" value="${driver.email}" required>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Phone Number *</label>
        <input type="tel" class="form-input" id="editDriverPhone" value="${driver.phone}" required>
      </div>
      <div class="form-group">
        <label class="form-label">License Number *</label>
        <input type="text" class="form-input" id="editDriverLicense" value="${driver.licenseNumber}" required>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Vehicle Model *</label>
        <input type="text" class="form-input" id="editDriverVehicle" value="${driver.vehicle}" required>
      </div>
      <div class="form-group">
        <label class="form-label">Vehicle Plate *</label>
        <input type="text" class="form-input" id="editDriverPlate" value="${driver.vehiclePlate}" required>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Vehicle Type</label>
        <select class="form-select" id="editDriverVehicleType">
          <option value="car" ${driver.vehicleType === 'car' ? 'selected' : ''}>Car</option>
          <option value="motor" ${driver.vehicleType === 'motor' ? 'selected' : ''}>Motorcycle</option>
          <option value="van" ${driver.vehicleType === 'van' ? 'selected' : ''}>Van</option>
          <option value="premium" ${driver.vehicleType === 'premium' ? 'selected' : ''}>Premium</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Status</label>
        <select class="form-select" id="editDriverStatus">
          <option value="available" ${driver.status === 'available' ? 'selected' : ''}>Available</option>
          <option value="busy" ${driver.status === 'busy' ? 'selected' : ''}>On Trip</option>
          <option value="offline" ${driver.status === 'offline' ? 'selected' : ''}>Offline</option>
          <option value="suspended" ${driver.status === 'suspended' ? 'selected' : ''}>Suspended</option>
        </select>
      </div>
    </div>
    
    <div class="form-group">
      <label class="form-label">Address</label>
      <input type="text" class="form-input" id="editDriverAddress" value="${driver.address}">
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Verification Status</label>
        <select class="form-select" id="editDriverVerification">
          <option value="verified" ${driver.verification === 'verified' ? 'selected' : ''}>Verified</option>
          <option value="pending" ${driver.verification === 'pending' ? 'selected' : ''}>Pending</option>
          <option value="unverified" ${driver.verification === 'unverified' ? 'selected' : ''}>Unverified</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Rating</label>
        <input type="number" class="form-input" id="editDriverRating" value="${driver.rating}" min="0" max="5" step="0.1">
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Total Trips</label>
        <input type="number" class="form-input" id="editDriverTrips" value="${driver.trips}" min="0">
      </div>
      <div class="form-group">
        <label class="form-label">Total Earnings (RM)</label>
        <input type="number" class="form-input" id="editDriverEarnings" value="${driver.earnings}" min="0" step="0.01">
      </div>
    </div>
    
    ${driver.suspensionReason ? `
      <div class="form-group">
        <label class="form-label">Suspension Reason</label>
        <textarea class="form-textarea" id="editSuspensionReason">${driver.suspensionReason}</textarea>
      </div>
    ` : ''}
    
    <div class="modal-actions">
      <button class="small-btn" onclick="closeDriverModal()">Cancel</button>
      <button class="btn" onclick="saveDriverChanges()">Save Changes</button>
      <button class="small-btn" style="background: rgba(255, 107, 107, 0.1); color: #ff6b6b;" 
              onclick="confirmDeleteDriver(${driverId})">
        Delete Driver
      </button>
    </div>
  `;
  
  document.getElementById('driverModalContent').innerHTML = content;
  document.getElementById('driverModal').style.display = 'flex';
}

// Save Driver Changes
function saveDriverChanges() {
  const driverIndex = driversData.findIndex(d => d.id === editingDriverId);
  if (driverIndex === -1) return;
  
  const name = document.getElementById('editDriverName').value;
  const email = document.getElementById('editDriverEmail').value;
  const phone = document.getElementById('editDriverPhone').value;
  const license = document.getElementById('editDriverLicense').value;
  const vehicle = document.getElementById('editDriverVehicle').value;
  const plate = document.getElementById('editDriverPlate').value;
  const vehicleType = document.getElementById('editDriverVehicleType').value;
  const status = document.getElementById('editDriverStatus').value;
  const address = document.getElementById('editDriverAddress').value;
  const verification = document.getElementById('editDriverVerification').value;
  const rating = parseFloat(document.getElementById('editDriverRating').value);
  const trips = parseInt(document.getElementById('editDriverTrips').value);
  const earnings = parseFloat(document.getElementById('editDriverEarnings').value);
  const suspensionReason = document.getElementById('editSuspensionReason')?.value;
  
  if (!name || !email || !phone || !license || !vehicle || !plate) {
    showNotification('Please fill all required fields!', 'error');
    return;
  }
  
  driversData[driverIndex] = {
    ...driversData[driverIndex],
    name,
    email,
    phone,
    licenseNumber: license,
    vehicle,
    vehiclePlate: plate,
    vehicleType,
    status,
    address,
    verification,
    rating,
    trips,
    earnings,
    ...(suspensionReason && { suspensionReason })
  };
  
  if (currentView === 'grid') {
    renderDriverGrid();
  } else {
    renderDriverTable();
  }
  updateStats();
  closeDriverModal();
  showNotification('Driver updated successfully!', 'success');
}

// Save Driver Settings
function saveDriverSettings() {
  const driverIndex = driversData.findIndex(d => d.id === editingDriverId);
  if (driverIndex === -1) return;
  
  const accountStatus = document.getElementById('driverAccountStatus').value;
  const verificationStatus = document.getElementById('driverVerificationStatus').value;
  const onlineStatus = document.getElementById('driverOnlineStatus').checked;
  
  driversData[driverIndex].status = accountStatus === 'active' ? 'available' : 'suspended';
  driversData[driverIndex].verification = verificationStatus;
  driversData[driverIndex].online = onlineStatus;
  
  if (currentView === 'grid') {
    renderDriverGrid();
  } else {
    renderDriverTable();
  }
  updateStats();
  showNotification('Driver settings updated!', 'success');
}

// Add New Driver
function addNewDriver() {
  editingDriverId = null;
  document.getElementById('driverModalTitle').textContent = 'Add New Driver';
  
  const content = `
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Full Name *</label>
        <input type="text" class="form-input" id="newDriverName" placeholder="Enter full name" required>
      </div>
      <div class="form-group">
        <label class="form-label">Email *</label>
        <input type="email" class="form-input" id="newDriverEmail" placeholder="Enter email address" required>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Phone Number *</label>
        <input type="tel" class="form-input" id="newDriverPhone" placeholder="Enter phone number" required>
      </div>
      <div class="form-group">
        <label class="form-label">IC/Passport Number *</label>
        <input type="text" class="form-input" id="newDriverIC" placeholder="Enter IC/Passport number" required>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Driver License *</label>
        <input type="text" class="form-input" id="newDriverLicense" placeholder="Enter license number" required>
      </div>
      <div class="form-group">
        <label class="form-label">License Expiry *</label>
        <input type="date" class="form-input" id="newDriverLicenseExpiry" required>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Vehicle Model *</label>
        <input type="text" class="form-input" id="newDriverVehicle" placeholder="e.g., Myvi, Axia, Y15" required>
      </div>
      <div class="form-group">
        <label class="form-label">Vehicle Plate *</label>
        <input type="text" class="form-input" id="newDriverPlate" placeholder="e.g., ABC 1234" required>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Vehicle Type</label>
        <select class="form-select" id="newDriverVehicleType">
          <option value="car">Car</option>
          <option value="motor">Motorcycle</option>
          <option value="van">Van</option>
          <option value="premium">Premium</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Initial Status</label>
        <select class="form-select" id="newDriverStatus">
          <option value="available">Available</option>
          <option value="offline">Offline</option>
          <option value="suspended">Suspended</option>
        </select>
      </div>
    </div>
    
    <div class="form-group">
      <label class="form-label">Address</label>
      <textarea class="form-textarea" id="newDriverAddress" placeholder="Enter full address" rows="3"></textarea>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Bank Account Number</label>
        <input type="text" class="form-input" id="newDriverBankAccount" placeholder="For payments">
      </div>
      <div class="form-group">
        <label class="form-label">Bank Name</label>
        <input type="text" class="form-input" id="newDriverBankName" placeholder="e.g., Maybank, CIMB">
      </div>
    </div>
    
    <div class="modal-actions">
      <button class="small-btn" onclick="closeDriverModal()">Cancel</button>
      <button class="btn" onclick="createNewDriver()">Create Driver</button>
    </div>
  `;
  
  document.getElementById('driverModalContent').innerHTML = content;
  document.getElementById('driverModal').style.display = 'flex';
}

// Create New Driver
function createNewDriver() {
  const name = document.getElementById('newDriverName').value;
  const email = document.getElementById('newDriverEmail').value;
  const phone = document.getElementById('newDriverPhone').value;
  const ic = document.getElementById('newDriverIC').value;
  const license = document.getElementById('newDriverLicense').value;
  const licenseExpiry = document.getElementById('newDriverLicenseExpiry').value;
  const vehicle = document.getElementById('newDriverVehicle').value;
  const plate = document.getElementById('newDriverPlate').value;
  const vehicleType = document.getElementById('newDriverVehicleType').value;
  const status = document.getElementById('newDriverStatus').value;
  const address = document.getElementById('newDriverAddress').value;
  const bankAccount = document.getElementById('newDriverBankAccount').value;
  const bankName = document.getElementById('newDriverBankName').value;
  
  if (!name || !email || !phone || !ic || !license || !licenseExpiry || !vehicle || !plate) {
    showNotification('Please fill all required fields!', 'error');
    return;
  }
  
  const newId = Math.max(...driversData.map(d => d.id)) + 1;
  const newDriver = {
    id: newId,
    name,
    email,
    phone,
    icNumber: ic,
    licenseNumber: license,
    licenseExpiry,
    vehicle,
    vehiclePlate: plate,
    vehicleType,
    status,
    online: status === 'available',
    rating: 5.0,
    trips: 0,
    earnings: 0,
    joined: new Date().toISOString().split('T')[0],
    lastActive: 'Just now',
    address: address || 'Not specified',
    bankAccount,
    bankName,
    documents: [
      { name: 'Driver License', status: 'pending', expiry: licenseExpiry },
      { name: 'Vehicle Insurance', status: 'pending', expiry: '' },
      { name: 'Road Tax', status: 'pending', expiry: '' }
    ],
    verification: 'pending',
    performance: {
      acceptanceRate: 100,
      completionRate: 100,
      avgRating: 5.0,
      responseTime: 'N/A'
    }
  };
  
  driversData.unshift(newDriver);
  if (currentView === 'grid') {
    renderDriverGrid();
  } else {
    renderDriverTable();
  }
  updateStats();
  closeDriverModal();
  showNotification('Driver created successfully!', 'success');
}

// Toggle Driver Status
function toggleDriverStatus(driverId) {
  const driverIndex = driversData.findIndex(d => d.id === driverId);
  if (driverIndex === -1) return;
  
  driversData[driverIndex].online = !driversData[driverIndex].online;
  if (!driversData[driverIndex].online) {
    driversData[driverIndex].status = 'offline';
  } else if (driversData[driverIndex].status === 'offline') {
    driversData[driverIndex].status = 'available';
  }
  
  if (currentView === 'grid') {
    renderDriverGrid();
  } else {
    renderDriverTable();
  }
  updateStats();
  showNotification(`Driver ${driversData[driverIndex].online ? 'activated' : 'deactivated'}!`, 'success');
}

// Confirm Delete Driver
function confirmDeleteDriver(driverId) {
  if (confirm('This will permanently delete the driver and all their data. Are you absolutely sure?')) {
    const index = driversData.findIndex(d => d.id === driverId);
    if (index !== -1) {
      driversData.splice(index, 1);
      selectedDrivers.delete(driverId);
      if (currentView === 'grid') {
        renderDriverGrid();
      } else {
        renderDriverTable();
      }
      updateStats();
      closeDriverModal();
      showNotification('Driver deleted successfully!', 'success');
    }
  }
}

// Switch Tab in Modal
function switchTab(tabName) {
  currentTab = tabName;
  updateModalTabs();
}

// Update Modal Tabs
function updateModalTabs() {
  // Update tab buttons
  document.querySelectorAll('.modal-tab').forEach(tab => {
    tab.classList.remove('active');
    if (tab.textContent.toLowerCase().includes(currentTab)) {
      tab.classList.add('active');
    }
  });
  
  // Show/hide tab content
  document.querySelectorAll('.modal-tab-content').forEach(content => {
    content.style.display = 'none';
  });
  
  const activeTab = document.getElementById(`${currentTab}Tab`);
  if (activeTab) {
    activeTab.style.display = 'block';
  }
}

// Export Drivers
function exportDrivers() {
  // Create CSV content
  const headers = ['Name', 'Email', 'Phone', 'License', 'Vehicle', 'Plate', 'Status', 'Rating', 'Trips', 'Earnings', 'Verification'];
  const csvContent = [
    headers.join(','),
    ...driversData.map(driver => [
      `"${driver.name}"`,
      `"${driver.email}"`,
      `"${driver.phone}"`,
      `"${driver.licenseNumber}"`,
      `"${driver.vehicle}"`,
      `"${driver.vehiclePlate}"`,
      `"${driver.status}"`,
      driver.rating,
      driver.trips,
      driver.earnings || 0,
      `"${driver.verification}"`
    ].join(','))
  ].join('\n');
  
  // Create download link
  const blob = new Blob([csvContent], { type: 'text/csv' });
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `drivers_${new Date().toISOString().split('T')[0]}.csv`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  window.URL.revokeObjectURL(url);
  
  showNotification('Drivers exported successfully!', 'success');
}

// Pagination Functions
function changePage(pageNum) {
  currentPage = pageNum;
  if (currentView === 'grid') {
    renderDriverGrid();
  } else {
    renderDriverTable();
  }
  updatePaginationButtons();
}

function updatePagination(totalItems) {
  const totalPages = Math.ceil(totalItems / itemsPerPage);
  const pagination = document.querySelector('.pagination');
  
  if (totalPages <= 1) {
    pagination.style.display = 'none';
  } else {
    pagination.style.display = 'flex';
  }
}

function updatePaginationButtons() {
  const prevBtn = document.getElementById('prevPage');
  const nextBtn = document.getElementById('nextPage');
  
  prevBtn.disabled = currentPage === 1;
}

// Close Driver Modal
function closeDriverModal() {
  document.getElementById('driverModal').style.display = 'none';
  editingDriverId = null;
}

// Helper Functions
function formatDate(dateString) {
  const date = new Date(dateString);
  return date.toLocaleDateString('en-US', { 
    year: 'numeric', 
    month: 'short', 
    day: 'numeric' 
  });
}

function getDaysAgo(dateString) {
  const date = new Date(dateString);
  const now = new Date();
  const diffTime = Math.abs(now - date);
  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
}

// Show Notification
function showNotification(message, type) {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.innerHTML = `
    <div style="display: flex; align-items: center; gap: 12px;">
      <div style="font-size: 20px;">
        ${type === 'success' ? '‚úì' : type === 'error' ? '‚úó' : '‚ö†Ô∏è'}
      </div>
      <div>${message}</div>
    </div>
  `;
  
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: ${type === 'success' ? 'rgba(76, 175, 80, 0.15)' : 
                 type === 'error' ? 'rgba(255, 107, 107, 0.15)' : 
                 'rgba(255, 221, 0, 0.15)'};
    border: 1px solid ${type === 'success' ? 'rgba(76, 175, 80, 0.3)' : 
                       type === 'error' ? 'rgba(255, 107, 107, 0.3)' : 
                       'rgba(255, 221, 0, 0.3)'};
    color: ${type === 'success' ? '#4CAF50' : 
            type === 'error' ? '#ff6b6b' : '#ffdd00'};
    padding: 16px 24px;
    border-radius: 12px;
    backdrop-filter: blur(10px);
    z-index: 10000;
    animation: slideIn 0.3s ease-out;
  `;
  
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.style.animation = 'slideOut 0.3s ease-out';
    setTimeout(() => {
      document.body.removeChild(notification);
    }, 300);
  }, 3000);
}

// Setup Event Listeners
function setupEventListeners() {
  // Bulk action change listener
  document.getElementById('bulkAction').addEventListener('change', updateBulkAction);
  
  // Close modals when clicking outside
  document.addEventListener('click', (e) => {
    if (e.target.classList.contains('modal-overlay')) {
      closeDriverModal();
      closeBulkModal();
    }
  });
  
  // Close modals with Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeDriverModal();
      closeBulkModal();
    }
  });
}

// Initialize on load
document.addEventListener('DOMContentLoaded', initializeDriverManagement);

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  @keyframes slideOut {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(100%);
      opacity: 0;
    }
  }
  
  .fade-in {
    animation: fadeIn 0.3s ease-out;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
`;
document.head.appendChild(style);
</script>
</body>
</html>